<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.js"></script>
    <script type="text/javascript">
      $(document).ready(  function () {

          function updateData() {
            var request = new XMLHttpRequest()
            request.open('get', 'http://192.168.1.86:8000/stat', false)
            request.setRequestHeader("Content-type", "application/json")
            request.send()
            var response = JSON.parse(request.responseText)

            if (response.status) { //this flips once the game starts
              $('.players').empty()
              for (user of response.team) {
                let content = '<p>' + user + '</p>'
                $('.players').append(content)
              }
              console.log(response.team);
            }

          if(response.logs) console.log('logs are:', response.logs);
          $('.logs').empty()
          for (log of response.logs) {
            let content = '<p>' + log + '</p>'
            $('.logs').append(content)
          }

          if(response.total) console.log('total scores are:', response.total);
          $('.total').empty()
          for (score of response.total) {
            let content = '<p><span>' + score.name + ' </span><span class="score"> ' + score.score + '</span></p>'
            $('.total').append(content)
          }

          }
          setInterval(updateData, 5000)
    })
    </script>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <style media="screen">

    </style>
  </head>
  <body>
    <h1>Laser Tag</h1>

    <h3>Players</h3>
    <div class="players">
      <p>Pikachu</p>
      <p>Lemonfrog</p>
      <p>Sleepy</p>
    </div>

    <h3>Game Logs</h3>
    <div class="logs">
      <p>Someone shot someone else</p>
      <p>Someone shot themselves</p>
      <p>A pokemon shot another pokemon</p>
    </div>

    <h3>Score Board</h3>
    <div class="total">
      <p><span>Pikachu</span><span class="score">8</span></p>
      <p><span>Nameless </span><span class="score">12</span></p>
      <p><span>Unnamed </span><span class="score">2</span></p>
    </div>
  </body>
</html>
